<div class="mt-8 border-t pt-6">
    <input type="number" id="temp-input" placeholder="輸入新溫度" 
           class="w-full border rounded-xl px-4 py-2 mb-3 text-center text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-400">
    <button onclick="updateTemp()" id="send-btn"
            class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-2 rounded-xl transition-all active:scale-95">
        送出更新
    </button>
</div>

<script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyFA4nL46y0vHmhuhLHCuTjDokrhPOdBOofcXORO5uUGp8N7GpSVv4Z4CpiqqyMFqOg/exec";

    // 原有的 fetchTemp 保持不變...

    // 新增更新溫度的函式
    async function updateTemp() {
        const val = document.getElementById('temp-input').value;
        const btn = document.getElementById('send-btn');
        
        if (!val) {
            alert("請先輸入數值");
            return;
        }

        btn.disabled = true;
        btn.innerText = "傳送中...";

        try {
            // 將數值帶在網址參數 ?v= 後面
            const response = await fetch(`${API_URL}?v=${val}`, {
                method: 'GET',
                redirect: 'follow'
            });

            const data = await response.json();
            alert(data.result); // 顯示「成功更新為 XX」
            
            document.getElementById('temp-input').value = ""; // 清空輸入框
            fetchTemp(); // 自動刷新上方顯示的溫度
            
        } catch (error) {
            console.error("更新失敗:", error);
            alert("更新失敗，請檢查網路或 GAS 設定");
        } finally {
            btn.disabled = false;
            btn.innerText = "送出更新";
        }
    }
</script>
